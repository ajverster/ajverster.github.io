<!doctype html>
<html lang="en">


<style>
    .header-use {
        background-color: #2c3e50;
        color: white;
        padding: 0px 0px 10px 0px;
        border-radius: 6px;
    }

    .card-header {
        background-color: rgb(255, 255, 255) !important;
    }


</style>

<head>
    <meta charset="utf-8"/>
    <link rel="icon" type="image/png" href="assets/paper_img/favicon.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>

    <title>Powerblade Results</title>

    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport'/>
    <meta name="viewport" content="width=device-width"/>

    <link href="assets/bootstrap.min.css" rel="stylesheet"/>

    <!-- Fonts and icons
<link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<link href='http://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
-->
</head>


<body class="index-page">


<nav class="navbar navbar-expand-lg navbar-dark bg-primary navbar-fixed-top">
    <div class="container-fluid">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarColor01"
                aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarColor01">
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link active" href="#">Home
                        <span class="visually-hidden">(current)</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#quality_analysis">Quality Analysis</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#strain_analysis">Strain Analysis</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="#genomecoverage_analysis">Genome Coverage</a>
                </li>

                

            </ul>
        </div>
    </div>
</nav>

<section>

    <div class="container text-center p-5">

        <div class="row p-5 header-use mb-3">
            <div class="col-lg-12">
                <div class="page-header">
                    <h1 id="quality_analysis">Quality Analysis</h1>
                </div>
            </div>
        </div>


       <div class="row" data-masonry='{"percentPosition": true }'>
            <div class="col-lg-6">
                <div class="card border-dark mb-2">
                    <h5 class="card-header text-primary text-uppercase">Read quality scores</h5>
                    <div class="container w-50">
                    <select data-optgroup="10201" class="form-select qualitybins_select m-3 input-sm">
                        <option value="1000" data-img-src="./assets/Mar23-QualityBins.png">March 2022</option>
                        <option value="1001" data-img-src="./assets/Apr26-QualityBins.png">April 2022</option>
                        <option value="1002" data-img-src="./assets/Jul26-QualityBins.png" >July 2022</option>
                        <option value="1002" data-img-src="./assets/Aug3-QualityBins.png" selected="selected">August 2022</option>
                    </select>
                    </div>
                    <div class="card-header p-0 mx-3 mt-3 position-relative z-index-1">
                        <img src="./assets/Aug3-QualityBins.png" class="img-fluid border-radius-lg" id="qualitybins_graph">
                    </div>
                    <div class="card-body pt-2">
                        <p class="card-description mb-4">
                            This shows a histogram of the the overall quality scores for reads.
                        </p>
                    </div>
                </div>

                </div>

            <div class="col-lg-6">
                <div class="card border-dark mb-2">
                    <h5 class="card-header text-primary text-uppercase">Base quality scores</h5>
                    <div class="container w-50">
                    <select data-optgroup="10201" class="form-select qualityhist_select m-3 input-sm">
                        <option value="1000" data-img-src="./assets/Mar23-QualityHist.png">March 2022</option>
                        <option value="1001" data-img-src="./assets/Apr26-QualityHist.png">April 2022</option>
                        <option value="1002" data-img-src="./assets/Jul26-QualityHist.png">July 2022</option>
                        <option value="1002" data-img-src="./assets/Aug3-QualityHist.png" selected="selected">August 2022</option>

                    </select>
                    </div>
                    <div class="card-header p-0 mx-3 mt-3 position-relative z-index-1">
                        <img src="./assets/Aug3-QualityHist.png" class="img-fluid border-radius-lg" id="qualityhist_graph">
                    </div>

                    <div class="card-body pt-2">
                        <p class="card-description mb-4">
                            This lineplot shows the average quality score at each base along the read.
                        </p>
                    </div>
                </div>
            </div>

            </div>


        </div>
    </div>


    <div class="container text-center p-5">

        <div class="row p-5 header-use mb-3">
            <div class="col-lg-12">
                <div class="page-header">
                    <h1 id="quality_analysis">Standard Tasks</h1>
                </div>
            </div>
        </div>

        <div class="row" data-masonry='{"percentPosition": true }'>
            <div class="col-lg-6">
                <div class="card border-dark mb-2">
                    <h5 class="card-header text-primary text-uppercase">GC content</h5>
                    <div class="container w-50">
                    <select data-optgroup="10201" class="form-select gccontentgraph m-3 input-sm">
                        <option value="1000" data-img-src="./assets/Mar23-GC_Coarse.png">March 2022</option>
                        <option value="1001" data-img-src="./assets/Apr26-GC_Coarse.png">April 2022</option>
                        <option value="1002" data-img-src="./assets/Jul26-GC_Coarse.png">July 2022</option>
                        <option value="1002" data-img-src="./assets/Aug3-GC_Coarse.png" selected="selected">August 2022</option>
                    </select>
                    </div>

                    <div class="card-header p-0 mx-3 mt-3 position-relative z-index-1">
                        <img src="./assets/Aug3-GC_Coarse.png" class="img-fluid border-radius-lg" id="gccoarse_graph">
                    </div>

                    <div class="card-body pt-2">
                        <p class="card-description mb-4">
                            This shows the GC content in all reads (left) and reads that aligned to MetaPhlAn markers (right).
                        </p>
                    </div>
                </div>
            </div>



            <div class="col-lg-6">
                <div class="card border-dark mb-2">
                    <h5 class="card-header text-primary text-uppercase">MetaPhlAn genus abundance</h5>
                    <div class="container w-50">
                        <select data-optgroup="10201" class="form-select metaphlangenus m-3 input-sm">
                            <option value="1000" data-img-src="./assets/Mar23-MetaphlanGenus.png">March 2022</option>
                            <option value="1001" data-img-src="./assets/Apr26-MetaphlanGenus.png">April 2022</option>
                            <option value="1002" data-img-src="./assets/Jul26-MetaphlanGenus.png">July 2022</option>
                            <option value="1002" data-img-src="./assets/Aug3-MetaphlanGenus.png" selected="selected">August 2022</option>
                        </select>
                        </div>
    
                    <div class="card-header p-0 mx-3 mt-3 position-relative z-index-1">
                        <img src="./assets/Aug3-MetaphlanGenus.png" class="img-fluid border-radius-lg" id="metaphlangenus_graph">
                    </div>

                    <div class="card-body pt-2">
                        <p class="card-description mb-4">
                            The abundance of different genera as estimated by MetaPhlAn
                        </p>
                    </div>
                </div>
            </div>

            <div class="col-lg-6">
                <div class="card border-dark mb-2">
                    <h5 class="card-header text-primary text-uppercase">MetaPhlAn species abundance</h5>
                    <div class="container w-50">
                        <select data-optgroup="10201" class="form-select metaphlanspecies m-3 input-sm">
                            <option value="1000" data-img-src="./assets/Mar23-MetaphlanSpecies.png">March 2022</option>
                            <option value="1001" data-img-src="./assets/Apr26-MetaphlanSpecies.png">April 2022</option>
                            <option value="1002" data-img-src="./assets/Jul26-MetaphlanSpecies.png" >July 2022</option>
                            <option value="1002" data-img-src="./assets/Aug3-MetaphlanSpecies.png" selected="selected">August 2022</option>
                        </select>
                        </div>

                    <div class="card-header p-0 mx-3 mt-3 position-relative z-index-1">
                        <img src="./assets/Aug3-MetaphlanSpecies.png" class="img-fluid border-radius-lg" id="metaphlanspecies_graph">
                    </div>

                    <div class="card-body pt-2">
                        <p class="card-description mb-4">
                            The abundance of different species as estimated by MetaPhlAn
                        </p>
                    </div>
                </div>
            </div>


            <div class="col-lg-6">
                <div class="card border-dark mb-2">
                    <h5 class="card-header text-primary text-uppercase">Assembly</h5>
                    <div class="container w-50">
                        <select data-optgroup="10201" class="form-select assembly m-3 input-sm">
                            <option value="1000" data-img-src="./assets/Mar23-AssemblyStats.png">March 2022</option>
                            <option value="1001" data-img-src="./assets/Apr26-AssemblyStats.png">April 2022</option>
                            <option value="1002" data-img-src="./assets/Jul26-AssemblyStats.png">July 2022</option>
                            <option value="1002" data-img-src="./assets/Aug3-AssemblyStats.png" selected="selected">August 2022</option>
                        </select>
                        </div>

                    <div class="card-header p-0 mx-3 mt-3 position-relative z-index-1">
                        <img src="./assets/Aug3-AssemblyStats.png" class="img-fluid border-radius-lg" id="assembly_graph">
                    </div>

                    <div class="card-body pt-2">
                        <p class="card-description mb-4">
                            Performance of genome assemblies with spades. L50 is the number of contigs required for 50% of the assembled genome. N50 is a weighted median of the contig sizes, meaning that 50% of the genome is contained in contigs larger than this size.
                        </p>
                    </div>
                </div>
            </div>



        </div>
        </div>
    </div>



    <div class="container text-center">

        <div class="row p-5 header-use mb-3">
            <div class="col-lg-12">
                <div class="page-header">
                    <h1 id="strain_analysis">Strain Analysis</h1>
                </div>
            </div>
        </div>
        <div class="row" data-masonry='{"percentPosition": true }'>
            <div class="col-lg-6">
                <div class="card border-dark mb-2">
                    <div class="card-header p-0 mx-3 mt-3 position-relative z-index-1">
                        <img src="./assets/index.png" class="img-fluid border-radius-lg">
                    </div>

                    <div class="card-body pt-2">
                        <span class="text-gradient text-primary text-uppercase text-xs font-weight-bold my-2">Phylogenetic Tree</span>
                        <p class="card-description mb-4">
                            A phylogenetic tree of Listeria monocytogenes strains, combined from NCBI and assembled from our sequencing data.
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="card border-dark mb-2">
                    <div class="card-header p-0 mx-3 mt-3 position-relative z-index-1">
                        <img src="./assets/ListeriaSNPs.png" class="img-fluid border-radius-lg">
                    </div>

                    <div class="card-body pt-2">
                        <span class="text-gradient text-primary text-uppercase text-xs font-weight-bold my-2">SNP Identification overlap</span>
                        <p class="card-description mb-4">
                            The overlap between Listeria monocytogenes SNPs identified with either the powerblade or the standard library preparation.
                        </p>
                    </div>
                </div>
            </div>

            <!-- <div class="col-lg-6">
                <div class="card">
                    <div class="card-header p-0 mx-3 mt-3 position-relative z-index-1">
                        <iframe height="600" width="600"
                                src="p1.html"></iframe>
                    </div>

                    <div class="card-body pt-2">
                        <span class="text-gradient text-primary text-uppercase text-xs font-weight-bold my-2">Phylogenetic Tree</span>
                        <p class="card-description mb-4">
                            A description of the graph
                        </p>
                    </div>
                </div>
            </div> -->
        </div>

    </div>



    <div class="container text-center p-5">

        <div class="row p-5 header-use mb-5">
            <div class="col-lg-12">
                <div class="page-header">
                    <h1 id="genomecoverage_analysis">Genome Coverage</h1>
                </div>
            </div>
        </div>
        <div class="row" data-masonry='{"percentPosition": true }'>

            <div class="col-lg-12">
                <div class="card border-dark mb-2">
                    <h5 class="card-header text-primary text-uppercase">Reference aligned data</h5>
                    <div class="container w-50">
                        <div class="row">
                            <div class="col-lg-6">
                        <select data-optgroup="10201" class="form-select refaligned_select_species m-3 input-sm">
                            <option value="1001" data-sp="s__Salmonella_enterica">Salmonella enterica</option>
                            <option value="1002" data-sp="s__Escherichia_coli">Escherichia coli</option>
                            <option value="1002" data-sp="s__Listeria_monocytogenes" selected="selected">Listeria monocytogenes</option>
                        </select>
                    </div>
                    <div class="col-lg-6">
                        <select data-optgroup="10201" class="form-select refaligned_select_date m-3 input-sm">
                            <option value="1001" data-date="Apr26">April 2022</option>
                            <option value="1002" data-date="Jul26">July 2022</option>
                            <option value="1002" data-date="Aug3" selected="selected">August 2022</option>
                        </select>
                    </div>
                    </div>
                        </div>
    
                    <div class="card-header p-0 mx-3 mt-3 position-relative z-index-1">
                        <iframe height="500" width="900" src="./plotly/s__Listeria_monocytogenes_Aug3_reference.html" id="refaligned"></iframe>
                    </div>

                    <div class="card-body pt-2">
                        <p class="card-description mb-4">
                            Coverage along the reference genome.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="row" data-masonry='{"percentPosition": true }'>

            <div class="col-lg-12">
                <div class="card border-dark mb-2">
                    <h5 class="card-header text-primary text-uppercase">Strain aligned data</h5>
                    <div class="container w-50">
                        <div class="row">
                            <div class="col-lg-6">
                        <select data-optgroup="10201" class="form-select strainaligned_select_species m-3 input-sm">
                            <option value="1001" data-sp="s__Salmonella_enterica">Salmonella enterica</option>
                            <option value="1002" data-sp="s__Escherichia_coli">Escherichia coli</option>
                            <option value="1002" data-sp="s__Listeria_monocytogenes" selected="selected">Listeria monocytogenes</option>
                        </select>
                    </div>
                    <div class="col-lg-6">
                        <select data-optgroup="10201" class="form-select strainaligned_select_date m-3 input-sm">
                            <option value="1001" data-date="Apr26">April 2022</option>
                            <option value="1002" data-date="Jul26">July 2022</option>
                            <option value="1002" data-date="Aug3" selected="selected">August 2022</option>
                        </select>
                    </div>
                    </div>
                        </div>
    
                    <div class="card-header p-0 mx-3 mt-3 position-relative z-index-1">
                        <iframe height="500" width="900" src="./plotly/s__Listeria_monocytogenes_Aug3_strain.html" id="strainaligned"></iframe>
                    </div>

                    <div class="card-body pt-2">
                        <p class="card-description mb-4">
                            Coverage along the genome of the sequenced strain. The strains are <em>E. coli</em> O157EDL933, <em>L. monocytogenes</em> 4b str. 02-1289 and <em>S. enterica</em> ATCC14028
                        </p>
                    </div>
                </div>
            </div>

        </div>

        <div class="container">
            <div class="row">

                <div class="col-lg-7">
                    <div class="card border-dark mb-2">
                        <h5 class="card-header text-primary text-uppercase">Genome coverage PCA</h5>
    
                        <div class="card-header p-0 mx-3 mt-3 position-relative z-index-1" id="genomepca_parent">
                            <iframe height="600" width="600"
                            src="https://bfssiadrianverster.shinyapps.io/genome_bin_pca/" id = "asdwqe"></iframe>

                        </div>
    
                        <div class="card-body pt-2">
                            <p class="card-description mb-4">
                                This graph shows batch effects in the relationship between GC content and sequencing depth. Different sequencing runs will have a different correlation between GC content and sequencing depth. This graph splits the genome into bins, which vary in GC content, normalizes the sequencing depth and then uses PCA to visualize these batch effects. 
                            </p>
                        </div>
                    </div>
                </div>
                </div>
            </div>
    

            </div>

</section>


</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/masonry/4.2.2/masonry.pkgd.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"></script>


<script>

    // Set up the shiny app after the page has loaded

    // document.onload = function() {
    // iframe = document.createElement("iframe")
    // iframe.setAttribute('height', '600');
    // iframe.setAttribute('width', '600');
    // iframe.setAttribute('src', 'https://bfssiadrianverster.shinyapps.io/genome_bin_pca/');
    // document.getElementById("genomepca_parent").appendChild(iframe); 
    // }
    // create the name
    function create_plotly_path(species,date, plotly_genome_tag) {
        return "./plotly/" + species + "_" + date + "_" + plotly_genome_tag + ".html"
    }

    var species_ref = $( '.refaligned_select_species' ).find( "option:selected" ).data( "sp" );
    var date_ref = $('.refaligned_select_date').find( "option:selected" ).data( "date" );
    $('.refaligned_select_species').change(function () {
        species_ref = $( this ).find( "option:selected" ).data( "sp" );
        $('#refaligned').attr("src", create_plotly_path(species_ref,date_ref, "reference"));
    });
    $('.refaligned_select_date').change(function () {
        date_ref = $( this ).find( "option:selected" ).data( "date" );
        $('#refaligned').attr("src", create_plotly_path(species_ref,date_ref, "reference"));
    });

    var species_strain = $( '.strainaligned_select_species' ).find( "option:selected" ).data( "sp" );
    var date_strain = $('.strainaligned_select_date').find( "option:selected" ).data( "date" );
    $('.strainaligned_select_species').change(function () {
        species_strain = $( this ).find( "option:selected" ).data( "sp" );
        console.log(species_strain);
        console.log(date_strain);
        $('#strainaligned').attr("src", create_plotly_path(species_strain,date_strain, "strain"));
    });
    $('.strainaligned_select_date').change(function () {
        date_strain = $( this ).find( "option:selected" ).data( "date" );
        $('#strainaligned').attr("src", create_plotly_path(species_strain,date_strain, "strain"));
    });



    $('.qualitybins_select').change(function () {
        $('#qualitybins_graph').attr("src", $( this ).find( "option:selected" ).data( "img-src" ));
    });
    $('.qualityhist_select').change(function () {
        $('#qualityhist_graph').attr("src", $( this ).find( "option:selected" ).data( "img-src" ));
    });

    $('.gccontentgraph').change(function () {
        $('#gccoarse_graph').attr("src", $( this ).find( "option:selected" ).data( "img-src" ));
    });

    $('.metaphlangenus').change(function () {
        $('#metaphlangenus_graph').attr("src", $( this ).find( "option:selected" ).data( "img-src" ));
    });

    $('.assembly').change(function () {
        $('#assembly_graph').attr("src", $( this ).find( "option:selected" ).data( "img-src" ));
    });
    
    $('.metaphlanspecies').change(function () {
        $('#metaphlanspecies_graph').attr("src", $( this ).find( "option:selected" ).data( "img-src" ));
    });
    
</script>
        

</html>
